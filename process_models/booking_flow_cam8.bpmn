<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0djaeya" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.5.1" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.1.0">
  <bpmn:collaboration id="booking_flow">
    <bpmn:participant id="Participant_03utb43" name="Customer" processRef="Process_03a8zn7" />
    <bpmn:participant id="Participant_0bnjzeh" name="Ticket Broker" processRef="Process_1oyf38q" />
    <bpmn:messageFlow id="Flow_1kxf5u4" sourceRef="find_route_options" targetRef="receive_journey_options" />
    <bpmn:messageFlow id="Flow_17w097p" sourceRef="send_order_placement" targetRef="wait_for_order" />
    <bpmn:messageFlow id="Flow_1gtwswc" sourceRef="book_tickets" targetRef="receive_order_confirmation" />
    <bpmn:messageFlow id="Flow_0sjwsjb" sourceRef="send_specifications_to_ticket_broker" targetRef="receive_journey_specification" />
    <bpmn:messageFlow id="Flow_0ci6r3y" sourceRef="send_retry_message" targetRef="Event_1t3sx9l" />
    <bpmn:messageFlow id="Flow_0syl6np" sourceRef="Event_1bmvzfb" targetRef="receive_order_failed" />
    <bpmn:messageFlow id="Flow_12zssjk" sourceRef="assemble_and_send_ticket_bundle" targetRef="Event_0ss6siy" />
    <bpmn:group id="Group_0xcsi01" categoryValueRef="CategoryValue_0p53zgh" />
    <bpmn:group id="Group_0dgr1tw" categoryValueRef="CategoryValue_1hkieqt" />
  </bpmn:collaboration>
  <bpmn:process id="Process_03a8zn7" name="Customer Booking Flow" isExecutable="true">
    <bpmn:extensionElements>
      <zeebe:userTaskForm id="userTaskForm_311066i">{
  "components": [
    {
      "text": "# Book your journey",
      "type": "text",
      "id": "Field_1lua2zc"
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobnhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Starting Station",
      "type": "select",
      "id": "Field_1kbmkh7",
      "key": "start_station",
      "description": "This is the station where your journey will begin",
      "defaultValue": "kobnhavn",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobnhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Destination",
      "type": "select",
      "id": "Field_1u6p2em",
      "key": "end_station",
      "description": "This is the final station in the journey",
      "defaultValue": "stockholm",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "First Class",
          "value": "first"
        },
        {
          "label": "Economy",
          "value": "economy"
        }
      ],
      "label": "Class",
      "type": "radio",
      "id": "Field_0i7db6m",
      "key": "class",
      "validate": {
        "required": true
      },
      "defaultValue": "1"
    },
    {
      "action": "submit",
      "label": "Look for routes",
      "type": "button",
      "id": "Field_0r22qpi",
      "key": "field_1442e0o"
    }
  ],
  "type": "default",
  "id": "journey_spec_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_0mvai5v">{
  "components": [
    {
      "text": "# Book your journey",
      "type": "text",
      "id": "Field_1lua2zc"
    },
    {
      "label": "Starting Station",
      "type": "select",
      "id": "Field_1kbmkh7",
      "key": "start_station",
      "description": "This is the station where your journey will begin",
      "defaultValue": "kobenhavn",
      "validate": {
        "required": true
      },
      "valuesKey": "all_stations"
    },
    {
      "label": "Destination",
      "type": "select",
      "id": "Field_1u6p2em",
      "key": "end_station",
      "description": "This is the final station in the journey",
      "defaultValue": "stockholm",
      "validate": {
        "required": true
      },
      "valuesKey": "all_stations"
    },
    {
      "values": [
        {
          "label": "First Class",
          "value": "first"
        },
        {
          "label": "Economy",
          "value": "economy"
        }
      ],
      "label": "Class",
      "type": "radio",
      "id": "Field_0i7db6m",
      "key": "class",
      "validate": {
        "required": true
      },
      "defaultValue": "1"
    },
    {
      "action": "submit",
      "label": "Look for routes",
      "type": "button",
      "id": "Field_0r22qpi",
      "key": "field_1442e0o"
    }
  ],
  "type": "default",
  "id": "journey_spec_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_1r9mpnr">{
  "components": [
    {
      "text": "## Trip Details",
      "type": "text",
      "id": "Field_13npqwj"
    },
    {
      "label": "Trip ID",
      "type": "textfield",
      "id": "Field_01p5g1d",
      "key": "option_selected_id",
      "disabled": true,
      "properties": {}
    },
    {
      "text": "## Billing Information",
      "type": "text",
      "id": "Field_1yj4j3k"
    },
    {
      "label": "Full Name",
      "type": "textfield",
      "id": "Field_0qoqzmw",
      "key": "full_name",
      "validate": {
        "required": true
      },
      "defaultValue": "John Doe"
    },
    {
      "label": "Phone Number",
      "type": "textfield",
      "id": "Field_1yyktcj",
      "key": "phone_number",
      "validate": {
        "required": true,
        "pattern": "^(\\+\\d{1,2}\\s?)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$"
      },
      "defaultValue": "+31612345678"
    },
    {
      "label": "Email",
      "type": "textfield",
      "id": "Field_1aaq3y0",
      "key": "email",
      "validate": {
        "pattern": "(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])",
        "required": true
      },
      "defaultValue": "john_doe@gmail.com"
    },
    {
      "label": "National ID",
      "type": "textfield",
      "id": "Field_006jl31",
      "key": "national_id",
      "validate": {
        "required": true,
        "pattern": "(^([0-9]{9})(X|V)$|^([0-9]{11})$)"
      },
      "defaultValue": "999999990X"
    },
    {
      "label": "IBAN",
      "type": "textfield",
      "id": "Field_0eaiv7q",
      "key": "iban",
      "validate": {
        "pattern": "^(?:(?:IT|SM)\\d{2}[A-Z]\\d{22}|CY\\d{2}[A-Z]\\d{23}|NL\\d{2}[A-Z]{4}\\d{10}|LV\\d{2}[A-Z]{4}\\d{13}|(?:BG|BH|GB|IE)\\d{2}[A-Z]{4}\\d{14}|GI\\d{2}[A-Z]{4}\\d{15}|RO\\d{2}[A-Z]{4}\\d{16}|KW\\d{2}[A-Z]{4}\\d{22}|MT\\d{2}[A-Z]{4}\\d{23}|NO\\d{13}|(?:DK|FI|GL|FO)\\d{16}|MK\\d{17}|(?:AT|EE|KZ|LU|XK)\\d{18}|(?:BA|HR|LI|CH|CR)\\d{19}|(?:GE|DE|LT|ME|RS)\\d{20}|IL\\d{21}|(?:AD|CZ|ES|MD|SA)\\d{22}|PT\\d{23}|(?:BE|IS)\\d{24}|(?:FR|MR|MC)\\d{25}|(?:AL|DO|LB|PL)\\d{26}|(?:AZ|HU)\\d{27}|(?:GR|MU)\\d{28})$",
        "required": true
      },
      "defaultValue": "NL02TRIO0123456789"
    }
  ],
  "type": "default",
  "id": "billing_information_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_3r165au">{
  "components": [
    {
      "text": "# Success!\nYou completed your order!\n\nThank you for travelling with Ticket to Europe!\n\nHere are your tickets:\n&lt;br&gt;\n&lt;img src=\"http://127.0.0.1:8083/get_latest_ticket\"&gt;",
      "type": "text",
      "id": "Field_1ue850o"
    }
  ],
  "type": "default",
  "id": "Form_0skt1lb",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_2p8tf3p">{
  "components": [
    {
      "text": "# Select Preferred Journey\n\nSelect your preferred trip here.",
      "type": "text",
      "id": "Field_0g58c66"
    },
    {
      "label": "Order ID",
      "type": "textfield",
      "id": "Field_0nib6e2",
      "key": "order_id",
      "disabled": true
    },
    {
      "text": "### Options:",
      "type": "text",
      "id": "Field_1af2ut9"
    },
    {
      "text": "&lt;img src=\"http://127.0.0.1:8083/get_latest_ticket_options\"&gt;",
      "type": "text",
      "id": "Field_0e469ls"
    },
    {
      "label": "Selection",
      "type": "select",
      "id": "Field_1spydti",
      "key": "option_selected_id",
      "validate": {
        "required": true
      },
      "defaultValue": "&lt;none&gt;",
      "valuesKey": "route_selection_options"
    }
  ],
  "type": "default",
  "id": "Form_0qf33zj",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
    </bpmn:extensionElements>
    <bpmn:exclusiveGateway id="satisfied_with_option" name="Satisfied with option?" default="Flow_satisfied">
      <bpmn:documentation>The customer can choose whether they want to book this journey or not.</bpmn:documentation>
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_0khrnne</bpmn:incoming>
      <bpmn:outgoing>Flow_no_wanted_options</bpmn:outgoing>
      <bpmn:outgoing>Flow_satisfied</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="receive_journey_options" name="receive journey options">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=route_options" target="route_options" />
          <zeebe:output source="=route_selection_options" target="route_selection_options" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0i3qulw</bpmn:incoming>
      <bpmn:outgoing>Flow_1376j8f</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1n672x9" messageRef="Message_3l60vad" />
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateThrowEvent id="send_specifications_to_ticket_broker" name="send specifications to ticket broker">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_message_forward_data" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;find_journey&#34;" target="name" />
          <zeebe:input source="=order_id" target="correlation_key" />
          <zeebe:input source="={&#10;  journey_specification: journey_specification,&#10;  order_id: order_id&#10;}" target="variables" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tu4n9v</bpmn:incoming>
      <bpmn:outgoing>Flow_0i3qulw</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_04km359" />
    </bpmn:intermediateThrowEvent>
    <bpmn:userTask id="Activity_0koua8h" name="Select preferred journey option">
      <bpmn:extensionElements>
        <zeebe:assignmentDefinition assignee="demo" />
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_2p8tf3p" />
        <zeebe:ioMapping>
          <zeebe:input source="=route_selection_options" target="route_selection_options" />
          <zeebe:output source="=option_selected_id" target="option_selected_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1376j8f</bpmn:incoming>
      <bpmn:outgoing>Flow_0khrnne</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="place_order" name="Place order for option">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;  &#34;full_name&#34;: full_name,&#10;  &#34;national_id&#34;:national_id,&#10;  &#34;phone_number&#34;:phone_number,&#10;  &#34;email&#34;:email,&#10;  &#34;iban&#34;:iban&#10;}" target="billing_information" />
        </zeebe:ioMapping>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_1r9mpnr" />
        <zeebe:assignmentDefinition assignee="demo" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_satisfied</bpmn:incoming>
      <bpmn:outgoing>Flow_0o1mlnq</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:intermediateCatchEvent id="receive_order_confirmation" name="Receive order confirmation">
      <bpmn:incoming>Flow_1a71apv</bpmn:incoming>
      <bpmn:outgoing>Flow_1t2y54l</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_167yxky" messageRef="Message_2g38bij" />
    </bpmn:intermediateCatchEvent>
    <bpmn:eventBasedGateway id="Gateway_0iauwby" name="Await order success">
      <bpmn:incoming>Flow_0fz6gyb</bpmn:incoming>
      <bpmn:outgoing>Flow_156hbi9</bpmn:outgoing>
      <bpmn:outgoing>Flow_1a71apv</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateThrowEvent id="send_order_placement" name="Send order placement">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_message_forward_data" />
        <zeebe:ioMapping>
          <zeebe:input source="=order_id" target="correlation_key" />
          <zeebe:input source="=&#34;wait_for_order&#34;" target="name" />
          <zeebe:input source="={&#10;  billing_information: billing_information,&#10;  option_selected_id: option_selected_id,&#10;  order_id: order_id&#10;}" target="variables" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0o1mlnq</bpmn:incoming>
      <bpmn:outgoing>Flow_0fz6gyb</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1wpov8e" />
    </bpmn:intermediateThrowEvent>
    <bpmn:intermediateCatchEvent id="receive_order_failed" name="Receive order failed">
      <bpmn:incoming>Flow_156hbi9</bpmn:incoming>
      <bpmn:outgoing>Flow_11pyg7e</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_16xthnm" messageRef="Message_0kdc66h" />
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateThrowEvent id="send_retry_message" name="Send Retry Message">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_message" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;send_retry_message&#34;" target="name" />
          <zeebe:input source="=order_id" target="correlation_key" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_no_wanted_options</bpmn:incoming>
      <bpmn:outgoing>Flow_1e64cnl</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0o932an" />
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="customer_completed" name="Booking completed">
      <bpmn:incoming>Flow_1bt91zk</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_0rgkr6v" name="Booking unsuccessful">
      <bpmn:incoming>Flow_11pyg7e</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:intermediateCatchEvent id="Event_0ss6siy" name="Receive ticket bundle">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=ticket_details" target="ticket_details" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1t2y54l</bpmn:incoming>
      <bpmn:outgoing>Flow_0jc83nc</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1rbgk6u" messageRef="Message_03l2nfh" />
    </bpmn:intermediateCatchEvent>
    <bpmn:userTask id="Activity_1efpzv6" name="View tickets">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:input source="=ticket_details" target="ticket_details" />
          <zeebe:input source="=order_id" target="order_id" />
        </zeebe:ioMapping>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_3r165au" />
        <zeebe:assignmentDefinition assignee="demo" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0jc83nc</bpmn:incoming>
      <bpmn:outgoing>Flow_1bt91zk</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1f5ukgs">
      <bpmn:incoming>Flow_start_booking</bpmn:incoming>
      <bpmn:incoming>Flow_1e64cnl</bpmn:incoming>
      <bpmn:incoming>Flow_1bufhhh</bpmn:incoming>
      <bpmn:outgoing>Flow_1uvme0m</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:startEvent id="rebooking_start" name="Rebooking start">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1bufhhh</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0wwosgk" messageRef="Message_3vndlro" />
    </bpmn:startEvent>
    <bpmn:startEvent id="booking_start" name="Start new booking">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=(now() - date and time(&#34;1970-01-01T00:00Z&#34;)) / duration(&#34;PT1S&#34;) * 1000" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_start_booking</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0x167kc" messageRef="Message_1j70mik" />
    </bpmn:startEvent>
    <bpmn:userTask id="fill_in_journey_form" name="Specify parameters for journey">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_0mvai5v" />
        <zeebe:ioMapping>
          <zeebe:input source="=all_stations" target="all_stations" />
          <zeebe:output source="={&#10;  &#34;start_station&#34;: start_station,&#10;  &#34;end_station&#34;: end_station,&#10;  &#34;class&#34;: class&#10;}" target="journey_specification" />
        </zeebe:ioMapping>
        <zeebe:assignmentDefinition assignee="demo" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0uax547</bpmn:incoming>
      <bpmn:outgoing>Flow_1tu4n9v</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_0e987uu" name="Load all train stations">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="get_all_station_options" />
        <zeebe:ioMapping>
          <zeebe:input source="=order_id" target="order_id" />
          <zeebe:output source="=all_stations" target="all_stations" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1uvme0m</bpmn:incoming>
      <bpmn:outgoing>Flow_0uax547</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0khrnne" sourceRef="Activity_0koua8h" targetRef="satisfied_with_option" />
    <bpmn:sequenceFlow id="Flow_no_wanted_options" name="No wanted options" sourceRef="satisfied_with_option" targetRef="send_retry_message">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=option_selected_id = null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_satisfied" sourceRef="satisfied_with_option" targetRef="place_order" />
    <bpmn:sequenceFlow id="Flow_0i3qulw" sourceRef="send_specifications_to_ticket_broker" targetRef="receive_journey_options" />
    <bpmn:sequenceFlow id="Flow_1376j8f" sourceRef="receive_journey_options" targetRef="Activity_0koua8h" />
    <bpmn:sequenceFlow id="Flow_1tu4n9v" sourceRef="fill_in_journey_form" targetRef="send_specifications_to_ticket_broker" />
    <bpmn:sequenceFlow id="Flow_0o1mlnq" sourceRef="place_order" targetRef="send_order_placement" />
    <bpmn:sequenceFlow id="Flow_1a71apv" sourceRef="Gateway_0iauwby" targetRef="receive_order_confirmation" />
    <bpmn:sequenceFlow id="Flow_1t2y54l" sourceRef="receive_order_confirmation" targetRef="Event_0ss6siy" />
    <bpmn:sequenceFlow id="Flow_0fz6gyb" sourceRef="send_order_placement" targetRef="Gateway_0iauwby" />
    <bpmn:sequenceFlow id="Flow_156hbi9" sourceRef="Gateway_0iauwby" targetRef="receive_order_failed" />
    <bpmn:sequenceFlow id="Flow_11pyg7e" sourceRef="receive_order_failed" targetRef="Event_0rgkr6v" />
    <bpmn:sequenceFlow id="Flow_1e64cnl" sourceRef="send_retry_message" targetRef="Gateway_1f5ukgs" />
    <bpmn:sequenceFlow id="Flow_1bt91zk" sourceRef="Activity_1efpzv6" targetRef="customer_completed" />
    <bpmn:sequenceFlow id="Flow_0jc83nc" sourceRef="Event_0ss6siy" targetRef="Activity_1efpzv6" />
    <bpmn:sequenceFlow id="Flow_start_booking" sourceRef="booking_start" targetRef="Gateway_1f5ukgs" />
    <bpmn:sequenceFlow id="Flow_1bufhhh" sourceRef="rebooking_start" targetRef="Gateway_1f5ukgs" />
    <bpmn:sequenceFlow id="Flow_1uvme0m" sourceRef="Gateway_1f5ukgs" targetRef="Activity_0e987uu" />
    <bpmn:sequenceFlow id="Flow_0uax547" sourceRef="Activity_0e987uu" targetRef="fill_in_journey_form" />
  </bpmn:process>
  <bpmn:process id="Process_1oyf38q" name="Ticket Broker Booking Flow" isExecutable="true">
    <bpmn:startEvent id="receive_journey_specification" name="Receive journey specification">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=journey_specification" target="journey_specification" />
          <zeebe:output source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_18x503c</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_16tkm98" messageRef="Message_3a03da5" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="find_route_options" name="Find route options">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="find_route_options" />
        <zeebe:ioMapping>
          <zeebe:input source="=journey_specification" target="journey_specification" />
          <zeebe:input source="=order_id" target="order_id" />
          <zeebe:output source="=route_options" target="route_options" />
          <zeebe:output source="=route_selection_options" target="route_selection_options" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18x503c</bpmn:incoming>
      <bpmn:outgoing>Flow_0m1qd5a</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:eventBasedGateway id="Gateway_04x62t8">
      <bpmn:incoming>Flow_0m1qd5a</bpmn:incoming>
      <bpmn:outgoing>Flow_15ub6z1</bpmn:outgoing>
      <bpmn:outgoing>Flow_1p3bbyz</bpmn:outgoing>
      <bpmn:outgoing>Flow_1gbage5</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_1ag1j7v" name="Wait 10 minutes">
      <bpmn:incoming>Flow_15ub6z1</bpmn:incoming>
      <bpmn:outgoing>Flow_10uz233</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_06bk22l">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P10M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="book_tickets" name="Book individual tickets for journey">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="book_tickets" />
        <zeebe:ioMapping>
          <zeebe:input source="=billing_information" target="billing_information" />
          <zeebe:input source="=order_id" target="order_id" />
          <zeebe:input source="=selected_option" target="selected_option" />
          <zeebe:output source="=tickets_details" target="tickets_details" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1t04ep0</bpmn:incoming>
      <bpmn:outgoing>Flow_0lolztr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="assemble_and_send_ticket_bundle" name="Assemble and send ticket bundle">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_message_forward_data" />
        <zeebe:ioMapping>
          <zeebe:input source="=order_id" target="correlation_key" />
          <zeebe:input source="={&#10;  ticket_details: tickets_details&#10;}" target="variables" />
          <zeebe:input source="=&#34;receive_ticket_bundle&#34;" target="name" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0lolztr</bpmn:incoming>
      <bpmn:outgoing>Flow_0z6uur8</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:parallelGateway id="Gateway_1isulns">
      <bpmn:incoming>Flow_1akgpi6</bpmn:incoming>
      <bpmn:outgoing>Flow_0qpg2sy</bpmn:outgoing>
      <bpmn:outgoing>Flow_14oahn9</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:exclusiveGateway id="Gateway_1tjhlpf" name="Is option selected and billing verified?" default="Flow_02mjgjt">
      <bpmn:incoming>Flow_1w431pr</bpmn:incoming>
      <bpmn:outgoing>Flow_1t04ep0</bpmn:outgoing>
      <bpmn:outgoing>Flow_02mjgjt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="wait_for_order" name="Wait for order placement">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=billing_information" target="billing_information" />
          <zeebe:output source="=option_selected_id" target="option_selected_id" />
          <zeebe:output source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1p3bbyz</bpmn:incoming>
      <bpmn:outgoing>Flow_1akgpi6</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1ucsnr4" messageRef="Message_0m8h3ts" />
    </bpmn:intermediateCatchEvent>
    <bpmn:parallelGateway id="Gateway_19t74gf">
      <bpmn:incoming>Flow_0bi3ixu</bpmn:incoming>
      <bpmn:incoming>Flow_1wa716f</bpmn:incoming>
      <bpmn:outgoing>Flow_1w431pr</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:serviceTask id="verify_payment_info" name="Verify payment info">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="verify_payment_info" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="=billing_information" target="billing_information" />
          <zeebe:output source="=billing_is_verified" target="billing_is_verified" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_14oahn9</bpmn:incoming>
      <bpmn:outgoing>Flow_0hir55b</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0qrfcfy">
      <bpmn:incoming>Flow_1t1pgmj</bpmn:incoming>
      <bpmn:incoming>Flow_0hir55b</bpmn:incoming>
      <bpmn:outgoing>Flow_1wa716f</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="select_user_trip" name="Select user trip">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="select_option_from_key" />
        <zeebe:ioMapping>
          <zeebe:input source="=route_options" target="options" />
          <zeebe:input source="=option_selected_id" target="key" />
          <zeebe:output source="=selected_option" target="selected_option" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0qpg2sy</bpmn:incoming>
      <bpmn:outgoing>Flow_18udxah</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_07ja635">
      <bpmn:incoming>Flow_020a814</bpmn:incoming>
      <bpmn:incoming>Flow_18udxah</bpmn:incoming>
      <bpmn:outgoing>Flow_0bi3ixu</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="Event_1t3sx9l" name="Receive retry message">
      <bpmn:incoming>Flow_1gbage5</bpmn:incoming>
      <bpmn:outgoing>Flow_03k1jxz</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0w8ue07" messageRef="Message_1tkfl9l" />
    </bpmn:intermediateCatchEvent>
    <bpmn:endEvent id="Event_1e93w1a" name="Options declined">
      <bpmn:incoming>Flow_03k1jxz</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="Gateway_1qs0i4z">
      <bpmn:incoming>Flow_02mjgjt</bpmn:incoming>
      <bpmn:incoming>Flow_0j8ttmj</bpmn:incoming>
      <bpmn:outgoing>Flow_0owjv1u</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateThrowEvent id="Event_1bmvzfb" name="Send order declined">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:input source="=order_id" target="correlation_key" />
          <zeebe:input source="={&#10;  order_id: order_id,&#10;  billing_is_verified: billing_is_verified,&#10;  selected_option: selected_option,&#10;  option_selected_id: option_selected_id&#10;}" target="variables" />
          <zeebe:input source="=&#34;receive_order_failed&#34;" target="name" />
        </zeebe:ioMapping>
        <zeebe:taskDefinition type="send_message_forward_data" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0owjv1u</bpmn:incoming>
      <bpmn:outgoing>Flow_0x1lg2k</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1361wlf" />
    </bpmn:intermediateThrowEvent>
    <bpmn:endEvent id="Event_0p2qupv" name="Options timed out">
      <bpmn:incoming>Flow_10uz233</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="broker_completed" name="Booking completed">
      <bpmn:incoming>Flow_0z6uur8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="Event_0p4x8j9" name="Booking unsuccessful">
      <bpmn:incoming>Flow_0x1lg2k</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:boundaryEvent id="ticket_unavailable_error" name="Ticket unavailable" attachedToRef="book_tickets">
      <bpmn:extensionElements />
      <bpmn:outgoing>Flow_0j8ttmj</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1qgbwf5" errorRef="Error_1avhy4h" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_0w4fixi" attachedToRef="verify_payment_info">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=False" target="billing_is_verified" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1t1pgmj</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_00j1x5u" errorRef="Error_1i2a0n4" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_1dkitk2" attachedToRef="select_user_trip">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=null" target="selected_option" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_020a814</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1564umm" errorRef="Error_0zgfcwm" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_18x503c" sourceRef="receive_journey_specification" targetRef="find_route_options" />
    <bpmn:sequenceFlow id="Flow_0m1qd5a" sourceRef="find_route_options" targetRef="Gateway_04x62t8" />
    <bpmn:sequenceFlow id="Flow_1p3bbyz" sourceRef="Gateway_04x62t8" targetRef="wait_for_order" />
    <bpmn:sequenceFlow id="Flow_15ub6z1" sourceRef="Gateway_04x62t8" targetRef="Event_1ag1j7v" />
    <bpmn:sequenceFlow id="Flow_1gbage5" sourceRef="Gateway_04x62t8" targetRef="Event_1t3sx9l" />
    <bpmn:sequenceFlow id="Flow_10uz233" sourceRef="Event_1ag1j7v" targetRef="Event_0p2qupv" />
    <bpmn:sequenceFlow id="Flow_1t04ep0" name="Yes" sourceRef="Gateway_1tjhlpf" targetRef="book_tickets">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=selected_option != null and billing_is_verified</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0lolztr" sourceRef="book_tickets" targetRef="assemble_and_send_ticket_bundle" />
    <bpmn:sequenceFlow id="Flow_0z6uur8" sourceRef="assemble_and_send_ticket_bundle" targetRef="broker_completed" />
    <bpmn:sequenceFlow id="Flow_1akgpi6" sourceRef="wait_for_order" targetRef="Gateway_1isulns" />
    <bpmn:sequenceFlow id="Flow_0qpg2sy" sourceRef="Gateway_1isulns" targetRef="select_user_trip" />
    <bpmn:sequenceFlow id="Flow_14oahn9" sourceRef="Gateway_1isulns" targetRef="verify_payment_info" />
    <bpmn:sequenceFlow id="Flow_1w431pr" sourceRef="Gateway_19t74gf" targetRef="Gateway_1tjhlpf" />
    <bpmn:sequenceFlow id="Flow_02mjgjt" name="No" sourceRef="Gateway_1tjhlpf" targetRef="Gateway_1qs0i4z" />
    <bpmn:sequenceFlow id="Flow_0bi3ixu" sourceRef="Gateway_07ja635" targetRef="Gateway_19t74gf" />
    <bpmn:sequenceFlow id="Flow_1wa716f" sourceRef="Gateway_0qrfcfy" targetRef="Gateway_19t74gf" />
    <bpmn:sequenceFlow id="Flow_0hir55b" sourceRef="verify_payment_info" targetRef="Gateway_0qrfcfy" />
    <bpmn:sequenceFlow id="Flow_1t1pgmj" name="Could not verify details" sourceRef="Event_0w4fixi" targetRef="Gateway_0qrfcfy" />
    <bpmn:sequenceFlow id="Flow_18udxah" sourceRef="select_user_trip" targetRef="Gateway_07ja635" />
    <bpmn:sequenceFlow id="Flow_020a814" name="Invalid selection" sourceRef="Event_1dkitk2" targetRef="Gateway_07ja635" />
    <bpmn:sequenceFlow id="Flow_03k1jxz" sourceRef="Event_1t3sx9l" targetRef="Event_1e93w1a" />
    <bpmn:sequenceFlow id="Flow_0j8ttmj" sourceRef="ticket_unavailable_error" targetRef="Gateway_1qs0i4z" />
    <bpmn:sequenceFlow id="Flow_0owjv1u" sourceRef="Gateway_1qs0i4z" targetRef="Event_1bmvzfb" />
    <bpmn:sequenceFlow id="Flow_0x1lg2k" sourceRef="Event_1bmvzfb" targetRef="Event_0p4x8j9" />
  </bpmn:process>
  <bpmn:message id="Message_3a03da5" name="find_journey">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationKey" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3l60vad" name="receive_journey_options">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1eej5mp" name="no_route_between_points" errorCode="no_route_between_points" />
  <bpmn:message id="Message_1t53vul" name="place_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_2g38bij" name="confirm_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_03l2nfh" name="receive_ticket_bundle">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_0kdc66h" name="receive_order_failed">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1ok0cm1" name="payment failed" errorCode="payment_failed" />
  <bpmn:error id="Error_1qywdd2" name="ticket unavailable" errorCode="ticket_unavailable" />
  <bpmn:message id="Message_00of2ts" name="booking_start" />
  <bpmn:category id="Category_00q6h2f">
    <bpmn:categoryValue id="CategoryValue_0p53zgh" value="finding the journey" />
  </bpmn:category>
  <bpmn:category id="Category_0crwelg">
    <bpmn:categoryValue id="CategoryValue_1hkieqt" value="booking the journey" />
  </bpmn:category>
  <bpmn:message id="Message_0m8h3ts" name="wait_for_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1i2a0n4" name="verification_failed" errorCode="verification_failed" />
  <bpmn:error id="Error_0zgfcwm" name="selection_option_from_key_error" errorCode="selection_option_from_key_error" />
  <bpmn:error id="Error_1avhy4h" name="booking_failed" errorCode="booking_failed" />
  <bpmn:message id="Message_1tkfl9l" name="send_retry_message">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3vndlro" name="rebooking_start" />
  <bpmn:message id="Message_1j70mik" name="start_new_booking" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="booking_flow">
      <bpmndi:BPMNShape id="Participant_03utb43_di" bpmnElement="Participant_03utb43" isHorizontal="true">
        <dc:Bounds x="160" y="130" width="2300" height="300" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0i4s5nq_di" bpmnElement="satisfied_with_option" isMarkerVisible="true">
        <dc:Bounds x="1075" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1072" y="322" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ok5oum_di" bpmnElement="receive_journey_options">
        <dc:Bounds x="832" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="812" y="235" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1fre0lb_di" bpmnElement="send_specifications_to_ticket_broker">
        <dc:Bounds x="682" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="660" y="222" width="79" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1g6z4p3_di" bpmnElement="Activity_0koua8h">
        <dc:Bounds x="920" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1bftc84_di" bpmnElement="place_order">
        <dc:Bounds x="1180" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0pu4pn8_di" bpmnElement="receive_order_confirmation">
        <dc:Bounds x="1932" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1915" y="236" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0jlfhkj_di" bpmnElement="Gateway_0iauwby">
        <dc:Bounds x="1435" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1434" y="235" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1q1q5ls_di" bpmnElement="send_order_placement">
        <dc:Bounds x="1342" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1335" y="242" width="55" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0yjwtoz_di" bpmnElement="receive_order_failed">
        <dc:Bounds x="2022" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2005" y="315" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0939gcy_di" bpmnElement="send_retry_message">
        <dc:Bounds x="1022" y="172" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1014" y="142" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_12clyih_di" bpmnElement="customer_completed">
        <dc:Bounds x="2372" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2365" y="315" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1mckn5l_di" bpmnElement="Event_0rgkr6v">
        <dc:Bounds x="2372" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2358" y="395" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0o0wges_di" bpmnElement="Event_0ss6siy">
        <dc:Bounds x="2112" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2095" y="235" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1nec0je_di" bpmnElement="Activity_1efpzv6">
        <dc:Bounds x="2210" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1f5ukgs_di" bpmnElement="Gateway_1f5ukgs" isMarkerVisible="true">
        <dc:Bounds x="335" y="265" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_12259zu_di" bpmnElement="rebooking_start">
        <dc:Bounds x="262" y="342" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="242" y="385" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1p7fmtn_di" bpmnElement="booking_start">
        <dc:Bounds x="262" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="237" y="248" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0y4wae2_di" bpmnElement="fill_in_journey_form">
        <dc:Bounds x="540" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1iqdajw_di" bpmnElement="Activity_0e987uu">
        <dc:Bounds x="410" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0khrnne_di" bpmnElement="Flow_0khrnne">
        <di:waypoint x="1020" y="290" />
        <di:waypoint x="1075" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z14f5o_di" bpmnElement="Flow_no_wanted_options">
        <di:waypoint x="1100" y="265" />
        <di:waypoint x="1100" y="190" />
        <di:waypoint x="1058" y="190" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="762" y="156" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1e14jc9_di" bpmnElement="Flow_satisfied">
        <di:waypoint x="1125" y="290" />
        <di:waypoint x="1180" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i3qulw_di" bpmnElement="Flow_0i3qulw">
        <di:waypoint x="718" y="290" />
        <di:waypoint x="832" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1376j8f_di" bpmnElement="Flow_1376j8f">
        <di:waypoint x="868" y="290" />
        <di:waypoint x="920" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tu4n9v_di" bpmnElement="Flow_1tu4n9v">
        <di:waypoint x="640" y="290" />
        <di:waypoint x="682" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0o1mlnq_di" bpmnElement="Flow_0o1mlnq">
        <di:waypoint x="1280" y="290" />
        <di:waypoint x="1342" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a71apv_di" bpmnElement="Flow_1a71apv">
        <di:waypoint x="1485" y="290" />
        <di:waypoint x="1932" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t2y54l_di" bpmnElement="Flow_1t2y54l">
        <di:waypoint x="1968" y="290" />
        <di:waypoint x="2112" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fz6gyb_di" bpmnElement="Flow_0fz6gyb">
        <di:waypoint x="1378" y="290" />
        <di:waypoint x="1435" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_156hbi9_di" bpmnElement="Flow_156hbi9">
        <di:waypoint x="1460" y="315" />
        <di:waypoint x="1460" y="370" />
        <di:waypoint x="2022" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11pyg7e_di" bpmnElement="Flow_11pyg7e">
        <di:waypoint x="2058" y="370" />
        <di:waypoint x="2372" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1e64cnl_di" bpmnElement="Flow_1e64cnl">
        <di:waypoint x="1022" y="190" />
        <di:waypoint x="360" y="190" />
        <di:waypoint x="360" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bt91zk_di" bpmnElement="Flow_1bt91zk">
        <di:waypoint x="2310" y="290" />
        <di:waypoint x="2372" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jc83nc_di" bpmnElement="Flow_0jc83nc">
        <di:waypoint x="2148" y="290" />
        <di:waypoint x="2210" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iazujz_di" bpmnElement="Flow_start_booking">
        <di:waypoint x="298" y="290" />
        <di:waypoint x="335" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1bufhhh_di" bpmnElement="Flow_1bufhhh">
        <di:waypoint x="298" y="360" />
        <di:waypoint x="360" y="360" />
        <di:waypoint x="360" y="315" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="293" y="342" width="53" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1uvme0m_di" bpmnElement="Flow_1uvme0m">
        <di:waypoint x="385" y="290" />
        <di:waypoint x="410" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uax547_di" bpmnElement="Flow_0uax547">
        <di:waypoint x="510" y="290" />
        <di:waypoint x="540" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0bnjzeh_di" bpmnElement="Participant_0bnjzeh" isHorizontal="true">
        <dc:Bounds x="160" y="430" width="2300" height="380" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17rviuy_di" bpmnElement="receive_journey_specification">
        <dc:Bounds x="682" y="542" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="660" y="585" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qpi6rd_di" bpmnElement="find_route_options">
        <dc:Bounds x="790" y="520" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1fnzjzi_di" bpmnElement="Gateway_04x62t8">
        <dc:Bounds x="935" y="535" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ag1j7v_di" bpmnElement="Event_1ag1j7v">
        <dc:Bounds x="942" y="652" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="921" y="695" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0j0p40o_di" bpmnElement="book_tickets">
        <dc:Bounds x="1900" y="520" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1wjcqxy_di" bpmnElement="assemble_and_send_ticket_bundle">
        <dc:Bounds x="2080" y="520" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_182zskw_di" bpmnElement="Gateway_1isulns">
        <dc:Bounds x="1405" y="535" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tjhlpf_di" bpmnElement="Gateway_1tjhlpf" isMarkerVisible="true">
        <dc:Bounds x="1785" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1769" y="490" width="86" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ijv48a_di" bpmnElement="wait_for_order">
        <dc:Bounds x="1342" y="542" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1327" y="588" width="67" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1j7s9ku_di" bpmnElement="Gateway_19t74gf">
        <dc:Bounds x="1705" y="535" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1er9m4m_di" bpmnElement="verify_payment_info">
        <dc:Bounds x="1460" y="580" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qrfcfy_di" bpmnElement="Gateway_0qrfcfy" isMarkerVisible="true">
        <dc:Bounds x="1615" y="667" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1lr06k9_di" bpmnElement="select_user_trip">
        <dc:Bounds x="1460" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_07ja635_di" bpmnElement="Gateway_07ja635" isMarkerVisible="true">
        <dc:Bounds x="1615" y="535" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vwzfsk_di" bpmnElement="Event_1t3sx9l">
        <dc:Bounds x="1022" y="472" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1007" y="515" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1e93w1a_di" bpmnElement="Event_1e93w1a">
        <dc:Bounds x="1102" y="472" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1080" y="515" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qs0i4z_di" bpmnElement="Gateway_1qs0i4z" isMarkerVisible="true">
        <dc:Bounds x="1905" y="667" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17qrjhe_di" bpmnElement="Event_1bmvzfb">
        <dc:Bounds x="2022" y="674" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2013" y="717" width="55" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0p2qupv_di" bpmnElement="Event_0p2qupv">
        <dc:Bounds x="1052" y="652" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1027" y="695" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1cvibe4_di" bpmnElement="broker_completed">
        <dc:Bounds x="2372" y="542" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2365" y="585" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1v1y1za_di" bpmnElement="Event_0p4x8j9">
        <dc:Bounds x="2372" y="674" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2359" y="717" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_148rnkd_di" bpmnElement="Event_1dkitk2">
        <dc:Bounds x="1472" y="512" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17j74fl_di" bpmnElement="Event_0w4fixi">
        <dc:Bounds x="1472" y="642" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0o52i6a_di" bpmnElement="ticket_unavailable_error">
        <dc:Bounds x="1912" y="582" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1936" y="625" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18x503c_di" bpmnElement="Flow_18x503c">
        <di:waypoint x="718" y="560" />
        <di:waypoint x="790" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0m1qd5a_di" bpmnElement="Flow_0m1qd5a">
        <di:waypoint x="890" y="560" />
        <di:waypoint x="935" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1p3bbyz_di" bpmnElement="Flow_1p3bbyz">
        <di:waypoint x="985" y="560" />
        <di:waypoint x="1342" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15ub6z1_di" bpmnElement="Flow_15ub6z1">
        <di:waypoint x="960" y="585" />
        <di:waypoint x="960" y="652" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gbage5_di" bpmnElement="Flow_1gbage5">
        <di:waypoint x="960" y="535" />
        <di:waypoint x="960" y="490" />
        <di:waypoint x="1022" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10uz233_di" bpmnElement="Flow_10uz233">
        <di:waypoint x="978" y="670" />
        <di:waypoint x="1052" y="670" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t04ep0_di" bpmnElement="Flow_1t04ep0">
        <di:waypoint x="1835" y="560" />
        <di:waypoint x="1900" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1858" y="542" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lolztr_di" bpmnElement="Flow_0lolztr">
        <di:waypoint x="2000" y="560" />
        <di:waypoint x="2080" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z6uur8_di" bpmnElement="Flow_0z6uur8">
        <di:waypoint x="2180" y="560" />
        <di:waypoint x="2372" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1akgpi6_di" bpmnElement="Flow_1akgpi6">
        <di:waypoint x="1378" y="560" />
        <di:waypoint x="1405" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qpg2sy_di" bpmnElement="Flow_0qpg2sy">
        <di:waypoint x="1430" y="535" />
        <di:waypoint x="1430" y="490" />
        <di:waypoint x="1460" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14oahn9_di" bpmnElement="Flow_14oahn9">
        <di:waypoint x="1430" y="585" />
        <di:waypoint x="1430" y="620" />
        <di:waypoint x="1460" y="620" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w431pr_di" bpmnElement="Flow_1w431pr">
        <di:waypoint x="1755" y="560" />
        <di:waypoint x="1785" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02mjgjt_di" bpmnElement="Flow_02mjgjt">
        <di:waypoint x="1810" y="585" />
        <di:waypoint x="1810" y="692" />
        <di:waypoint x="1905" y="692" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1818" y="595" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bi3ixu_di" bpmnElement="Flow_0bi3ixu">
        <di:waypoint x="1665" y="560" />
        <di:waypoint x="1705" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wa716f_di" bpmnElement="Flow_1wa716f">
        <di:waypoint x="1665" y="692" />
        <di:waypoint x="1730" y="692" />
        <di:waypoint x="1730" y="585" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hir55b_di" bpmnElement="Flow_0hir55b">
        <di:waypoint x="1560" y="620" />
        <di:waypoint x="1640" y="620" />
        <di:waypoint x="1640" y="667" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t1pgmj_di" bpmnElement="Flow_1t1pgmj">
        <di:waypoint x="1490" y="678" />
        <di:waypoint x="1490" y="692" />
        <di:waypoint x="1615" y="692" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1511" y="666" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18udxah_di" bpmnElement="Flow_18udxah">
        <di:waypoint x="1560" y="490" />
        <di:waypoint x="1640" y="490" />
        <di:waypoint x="1640" y="535" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_020a814_di" bpmnElement="Flow_020a814">
        <di:waypoint x="1490" y="548" />
        <di:waypoint x="1490" y="560" />
        <di:waypoint x="1615" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1510" y="542" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03k1jxz_di" bpmnElement="Flow_03k1jxz">
        <di:waypoint x="1058" y="490" />
        <di:waypoint x="1102" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0j8ttmj_di" bpmnElement="Flow_0j8ttmj">
        <di:waypoint x="1930" y="618" />
        <di:waypoint x="1930" y="667" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0owjv1u_di" bpmnElement="Flow_0owjv1u">
        <di:waypoint x="1955" y="692" />
        <di:waypoint x="2022" y="692" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0x1lg2k_di" bpmnElement="Flow_0x1lg2k">
        <di:waypoint x="2058" y="692" />
        <di:waypoint x="2372" y="692" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Group_0xcsi01_di" bpmnElement="Group_0xcsi01">
        <dc:Bounds x="210" y="80" width="940" height="750" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="655" y="87" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Group_0dgr1tw_di" bpmnElement="Group_0dgr1tw">
        <dc:Bounds x="1160" y="80" width="1280" height="750" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1772" y="87" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1kxf5u4_di" bpmnElement="Flow_1kxf5u4">
        <di:waypoint x="850" y="520" />
        <di:waypoint x="850" y="308" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17w097p_di" bpmnElement="Flow_17w097p">
        <di:waypoint x="1360" y="308" />
        <di:waypoint x="1360" y="542" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gtwswc_di" bpmnElement="Flow_1gtwswc">
        <di:waypoint x="1950" y="520" />
        <di:waypoint x="1950" y="308" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sjwsjb_di" bpmnElement="Flow_0sjwsjb">
        <di:waypoint x="700" y="308" />
        <di:waypoint x="700" y="542" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ci6r3y_di" bpmnElement="Flow_0ci6r3y">
        <di:waypoint x="1040" y="208" />
        <di:waypoint x="1040" y="472" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0syl6np_di" bpmnElement="Flow_0syl6np">
        <di:waypoint x="2040" y="674" />
        <di:waypoint x="2040" y="388" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12zssjk_di" bpmnElement="Flow_12zssjk">
        <di:waypoint x="2130" y="520" />
        <di:waypoint x="2130" y="308" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
