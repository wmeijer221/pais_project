<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0djaeya" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.5.1" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.1.0">
  <bpmn:collaboration id="booking_flow">
    <bpmn:participant id="Participant_03utb43" name="Customer" processRef="Process_03a8zn7" />
    <bpmn:participant id="Participant_0bnjzeh" name="Ticket Broker" processRef="Process_1oyf38q" />
    <bpmn:messageFlow id="Flow_1kxf5u4" sourceRef="find_route_options" targetRef="receive_journey_options" />
    <bpmn:messageFlow id="Flow_17w097p" sourceRef="send_order_placement" targetRef="wait_for_order" />
    <bpmn:messageFlow id="Flow_1gtwswc" sourceRef="book_tickets" targetRef="receive_order_confirmation" />
    <bpmn:messageFlow id="Flow_07acwrm" sourceRef="send_ticket_bundle" targetRef="receive_ticket_bundle" />
    <bpmn:messageFlow id="Flow_1sfvhv9" sourceRef="send_order_declined" targetRef="receive_order_failed" />
    <bpmn:messageFlow id="Flow_0sjwsjb" sourceRef="send_specifications_to_ticket_broker" targetRef="receive_journey_specification" />
    <bpmn:group id="Group_0xcsi01" categoryValueRef="CategoryValue_0p53zgh" />
    <bpmn:group id="Group_0dgr1tw" categoryValueRef="CategoryValue_1hkieqt" />
  </bpmn:collaboration>
  <bpmn:process id="Process_03a8zn7" name="Customer Process Flow" isExecutable="true">
    <bpmn:extensionElements>
      <zeebe:userTaskForm id="userTaskForm_311066i">{
  "components": [
    {
      "text": "# Book your journey",
      "type": "text",
      "id": "Field_1lua2zc"
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobnhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Starting Station",
      "type": "select",
      "id": "Field_1kbmkh7",
      "key": "start_station",
      "description": "This is the station where your journey will begin",
      "defaultValue": "kobnhavn",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobnhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Destination",
      "type": "select",
      "id": "Field_1u6p2em",
      "key": "end_station",
      "description": "This is the final station in the journey",
      "defaultValue": "stockholm",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "First Class",
          "value": "first"
        },
        {
          "label": "Economy",
          "value": "economy"
        }
      ],
      "label": "Class",
      "type": "radio",
      "id": "Field_0i7db6m",
      "key": "class",
      "validate": {
        "required": true
      },
      "defaultValue": "1"
    },
    {
      "action": "submit",
      "label": "Look for routes",
      "type": "button",
      "id": "Field_0r22qpi",
      "key": "field_1442e0o"
    }
  ],
  "type": "default",
  "id": "journey_spec_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_0mvai5v">{
  "components": [
    {
      "text": "# Book your journey",
      "type": "text",
      "id": "Field_1lua2zc"
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobenhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Starting Station",
      "type": "select",
      "id": "Field_1kbmkh7",
      "key": "start_station",
      "description": "This is the station where your journey will begin",
      "defaultValue": "kobenhavn",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "Copenhagen",
          "value": "kobenhavn"
        },
        {
          "label": "Stockholm",
          "value": "stockholm"
        }
      ],
      "label": "Destination",
      "type": "select",
      "id": "Field_1u6p2em",
      "key": "end_station",
      "description": "This is the final station in the journey",
      "defaultValue": "stockholm",
      "validate": {
        "required": true
      }
    },
    {
      "values": [
        {
          "label": "First Class",
          "value": "first"
        },
        {
          "label": "Economy",
          "value": "economy"
        }
      ],
      "label": "Class",
      "type": "radio",
      "id": "Field_0i7db6m",
      "key": "class",
      "validate": {
        "required": true
      },
      "defaultValue": "1"
    },
    {
      "action": "submit",
      "label": "Look for routes",
      "type": "button",
      "id": "Field_0r22qpi",
      "key": "field_1442e0o"
    }
  ],
  "type": "default",
  "id": "journey_spec_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_1r9mpnr">{
  "components": [
    {
      "text": "## Trip Details",
      "type": "text",
      "id": "Field_13npqwj"
    },
    {
      "label": "Trip ID",
      "type": "textfield",
      "id": "Field_01p5g1d",
      "key": "option_selected_id",
      "disabled": true,
      "properties": {}
    },
    {
      "text": "## Billing Information",
      "type": "text",
      "id": "Field_1yj4j3k"
    },
    {
      "label": "Full Name",
      "type": "textfield",
      "id": "Field_0qoqzmw",
      "key": "full_name",
      "validate": {
        "required": true
      },
      "defaultValue": "John Doe"
    },
    {
      "label": "Phone Number",
      "type": "textfield",
      "id": "Field_1yyktcj",
      "key": "phone_number",
      "validate": {
        "required": true,
        "pattern": "^(\\+\\d{1,2}\\s?)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$"
      },
      "defaultValue": "+31612345678"
    },
    {
      "label": "Email",
      "type": "textfield",
      "id": "Field_1aaq3y0",
      "key": "email",
      "validate": {
        "pattern": "(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])",
        "required": true
      },
      "defaultValue": "john_doe@gmail.com"
    },
    {
      "label": "National ID",
      "type": "textfield",
      "id": "Field_006jl31",
      "key": "national_id",
      "validate": {
        "required": true,
        "pattern": "(^([0-9]{9})(X|V)$|^([0-9]{11})$)"
      },
      "defaultValue": "999999990X"
    },
    {
      "label": "IBAN",
      "type": "textfield",
      "id": "Field_0eaiv7q",
      "key": "iban",
      "validate": {
        "pattern": "^(?:(?:IT|SM)\\d{2}[A-Z]\\d{22}|CY\\d{2}[A-Z]\\d{23}|NL\\d{2}[A-Z]{4}\\d{10}|LV\\d{2}[A-Z]{4}\\d{13}|(?:BG|BH|GB|IE)\\d{2}[A-Z]{4}\\d{14}|GI\\d{2}[A-Z]{4}\\d{15}|RO\\d{2}[A-Z]{4}\\d{16}|KW\\d{2}[A-Z]{4}\\d{22}|MT\\d{2}[A-Z]{4}\\d{23}|NO\\d{13}|(?:DK|FI|GL|FO)\\d{16}|MK\\d{17}|(?:AT|EE|KZ|LU|XK)\\d{18}|(?:BA|HR|LI|CH|CR)\\d{19}|(?:GE|DE|LT|ME|RS)\\d{20}|IL\\d{21}|(?:AD|CZ|ES|MD|SA)\\d{22}|PT\\d{23}|(?:BE|IS)\\d{24}|(?:FR|MR|MC)\\d{25}|(?:AL|DO|LB|PL)\\d{26}|(?:AZ|HU)\\d{27}|(?:GR|MU)\\d{28})$",
        "required": true
      },
      "defaultValue": "NL02TRIO0123456789"
    }
  ],
  "type": "default",
  "id": "billing_information_form",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.1.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.5.1"
  },
  "schemaVersion": 5
}</zeebe:userTaskForm>
    </bpmn:extensionElements>
    <bpmn:exclusiveGateway id="satisfied_with_option" name="Satisfied with option?" default="Flow_satisfied">
      <bpmn:documentation>The customer can choose whether they want to book this journey or not.</bpmn:documentation>
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_0khrnne</bpmn:incoming>
      <bpmn:outgoing>Flow_no_wanted_options</bpmn:outgoing>
      <bpmn:outgoing>Flow_satisfied</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="receive_journey_options" name="receive journey options">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=route_options" target="route_options" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0i3qulw</bpmn:incoming>
      <bpmn:outgoing>Flow_1376j8f</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1n672x9" messageRef="Message_3l60vad" />
    </bpmn:intermediateCatchEvent>
    <bpmn:userTask id="fill_in_journey_form" name="Specify parameters for journey">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_0mvai5v" />
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;  &#34;start_station&#34;: start_station,&#10;  &#34;end_station&#34;: end_station,&#10;  &#34;class&#34;: class&#10;}" target="journey_specification" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1uvme0m</bpmn:incoming>
      <bpmn:outgoing>Flow_1tu4n9v</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1f5ukgs">
      <bpmn:incoming>Flow_start_booking</bpmn:incoming>
      <bpmn:incoming>Flow_no_wanted_options</bpmn:incoming>
      <bpmn:outgoing>Flow_1uvme0m</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateThrowEvent id="send_specifications_to_ticket_broker" name="send specifications to ticket broker">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_journey_specification" />
        <zeebe:ioMapping>
          <zeebe:input source="=journey_specification" target="journey_specification" />
          <zeebe:input source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tu4n9v</bpmn:incoming>
      <bpmn:outgoing>Flow_0i3qulw</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_04km359" />
    </bpmn:intermediateThrowEvent>
    <bpmn:userTask id="Activity_0koua8h" name="Select preferred journey option">
      <bpmn:extensionElements />
      <bpmn:incoming>Flow_1376j8f</bpmn:incoming>
      <bpmn:outgoing>Flow_0khrnne</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="booking_start" name="Booking Start">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=(now() - date and time(&#34;1970-01-01T00:00Z&#34;)) / duration(&#34;PT1S&#34;) * 1000" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_start_booking</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="place_order" name="Place order for option">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;  &#34;full_name&#34;: full_name,&#10;  &#34;national_id&#34;:national_id,&#10;  &#34;phone_number&#34;:phone_number,&#10;  &#34;email&#34;:email,&#10;  &#34;iban&#34;:iban&#10;}" target="billing_information" />
        </zeebe:ioMapping>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_1r9mpnr" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_satisfied</bpmn:incoming>
      <bpmn:outgoing>Flow_0o1mlnq</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0khrnne" sourceRef="Activity_0koua8h" targetRef="satisfied_with_option" />
    <bpmn:sequenceFlow id="Flow_no_wanted_options" name="No wanted options" sourceRef="satisfied_with_option" targetRef="Gateway_1f5ukgs">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=option_selected_id = null</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_satisfied" sourceRef="satisfied_with_option" targetRef="place_order" />
    <bpmn:sequenceFlow id="Flow_0i3qulw" sourceRef="send_specifications_to_ticket_broker" targetRef="receive_journey_options" />
    <bpmn:sequenceFlow id="Flow_1376j8f" sourceRef="receive_journey_options" targetRef="Activity_0koua8h" />
    <bpmn:sequenceFlow id="Flow_1uvme0m" sourceRef="Gateway_1f5ukgs" targetRef="fill_in_journey_form" />
    <bpmn:sequenceFlow id="Flow_1tu4n9v" sourceRef="fill_in_journey_form" targetRef="send_specifications_to_ticket_broker" />
    <bpmn:sequenceFlow id="Flow_start_booking" sourceRef="booking_start" targetRef="Gateway_1f5ukgs" />
    <bpmn:sequenceFlow id="Flow_0o1mlnq" sourceRef="place_order" targetRef="send_order_placement" />
    <bpmn:sequenceFlow id="Flow_1a71apv" sourceRef="Gateway_0iauwby" targetRef="receive_order_confirmation" />
    <bpmn:sequenceFlow id="Flow_156hbi9" sourceRef="Gateway_0iauwby" targetRef="receive_order_failed" />
    <bpmn:sequenceFlow id="Flow_0fz6gyb" sourceRef="send_order_placement" targetRef="Gateway_0iauwby" />
    <bpmn:receiveTask id="receive_ticket_bundle" name="Receive ticket bundle" messageRef="Message_03l2nfh">
      <bpmn:incoming>Flow_1t2y54l</bpmn:incoming>
      <bpmn:outgoing>Flow_0cavbhh</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:intermediateCatchEvent id="receive_order_confirmation" name="Receive order confirmation">
      <bpmn:incoming>Flow_1a71apv</bpmn:incoming>
      <bpmn:outgoing>Flow_1t2y54l</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_167yxky" messageRef="Message_2g38bij" />
    </bpmn:intermediateCatchEvent>
    <bpmn:endEvent id="customer_completed" name="Booking completed">
      <bpmn:incoming>Flow_0cavbhh</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1t2y54l" sourceRef="receive_order_confirmation" targetRef="receive_ticket_bundle" />
    <bpmn:sequenceFlow id="Flow_0cavbhh" sourceRef="receive_ticket_bundle" targetRef="customer_completed" />
    <bpmn:eventBasedGateway id="Gateway_0iauwby">
      <bpmn:incoming>Flow_0fz6gyb</bpmn:incoming>
      <bpmn:outgoing>Flow_156hbi9</bpmn:outgoing>
      <bpmn:outgoing>Flow_1a71apv</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateThrowEvent id="send_order_placement" name="send order placement">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_order_placement" />
        <zeebe:ioMapping>
          <zeebe:input source="=billing_information" target="billing_information" />
          <zeebe:input source="=option_selected_id" target="option_selected_id" />
          <zeebe:input source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0o1mlnq</bpmn:incoming>
      <bpmn:outgoing>Flow_0fz6gyb</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1wpov8e" />
    </bpmn:intermediateThrowEvent>
    <bpmn:intermediateCatchEvent id="receive_order_failed" name="Receive order failed">
      <bpmn:incoming>Flow_156hbi9</bpmn:incoming>
      <bpmn:outgoing>Flow_11pyg7e</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_16xthnm" messageRef="Message_0kdc66h" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_11pyg7e" sourceRef="receive_order_failed" targetRef="Event_0rgkr6v" />
    <bpmn:endEvent id="Event_0rgkr6v" name="Booking unsuccessful">
      <bpmn:incoming>Flow_11pyg7e</bpmn:incoming>
    </bpmn:endEvent>
  </bpmn:process>
  <bpmn:process id="Process_1oyf38q" name="Ticket Brokerage Flow" isExecutable="true">
    <bpmn:startEvent id="receive_journey_specification" name="Receive journey specification">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=journey_specification" target="journey_specification" />
          <zeebe:output source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_18x503c</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_16tkm98" messageRef="Message_3a03da5" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="find_route_options" name="Find route options">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="find_route_options" />
        <zeebe:ioMapping>
          <zeebe:input source="=journey_specification" target="journey_specification" />
          <zeebe:input source="=order_id" target="order_id" />
          <zeebe:output source="=route_options" target="route_options" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18x503c</bpmn:incoming>
      <bpmn:outgoing>Flow_0m1qd5a</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:eventBasedGateway id="Gateway_04x62t8">
      <bpmn:incoming>Flow_0m1qd5a</bpmn:incoming>
      <bpmn:outgoing>Flow_1p3bbyz</bpmn:outgoing>
      <bpmn:outgoing>Flow_15ub6z1</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_1ag1j7v" name="Wait 10 minutes">
      <bpmn:incoming>Flow_15ub6z1</bpmn:incoming>
      <bpmn:outgoing>Flow_10uz233</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_06bk22l">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">P10M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:endEvent id="Event_0p2qupv" name="Options timed out">
      <bpmn:incoming>Flow_10uz233</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="book_tickets" name="Book individual tickets for journey">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="book_tickets" />
        <zeebe:ioMapping>
          <zeebe:input source="=billing_information" target="billing_information" />
          <zeebe:input source="=order_id" target="order_id" />
          <zeebe:input source="=selected_option" target="selected_option" />
          <zeebe:output source="=tickets_details" target="tickets_details" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1t04ep0</bpmn:incoming>
      <bpmn:outgoing>Flow_0lolztr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="send_ticket_bundle" name="Assemble and send ticket bundle">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_ticket_bundle" />
        <zeebe:ioMapping>
          <zeebe:input source="=tickets_details" target="tickets_details" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0lolztr</bpmn:incoming>
      <bpmn:outgoing>Flow_0z6uur8</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="broker_completed" name="Booking completed">
      <bpmn:incoming>Flow_0z6uur8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:parallelGateway id="Gateway_1isulns">
      <bpmn:incoming>Flow_1akgpi6</bpmn:incoming>
      <bpmn:outgoing>Flow_0qpg2sy</bpmn:outgoing>
      <bpmn:outgoing>Flow_14oahn9</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:exclusiveGateway id="Gateway_1qs0i4z">
      <bpmn:incoming>Flow_02mjgjt</bpmn:incoming>
      <bpmn:incoming>Flow_0j8ttmj</bpmn:incoming>
      <bpmn:outgoing>Flow_1xlfyul</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_1tjhlpf" name="Is option selected and billing verified?" default="Flow_02mjgjt">
      <bpmn:incoming>Flow_1w431pr</bpmn:incoming>
      <bpmn:outgoing>Flow_1t04ep0</bpmn:outgoing>
      <bpmn:outgoing>Flow_02mjgjt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:boundaryEvent id="ticket_unavailable_error" name="Ticket unavailable" attachedToRef="book_tickets">
      <bpmn:extensionElements />
      <bpmn:outgoing>Flow_0j8ttmj</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1qgbwf5" errorRef="Error_1avhy4h" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_18x503c" sourceRef="receive_journey_specification" targetRef="find_route_options" />
    <bpmn:sequenceFlow id="Flow_0m1qd5a" sourceRef="find_route_options" targetRef="Gateway_04x62t8" />
    <bpmn:sequenceFlow id="Flow_1p3bbyz" sourceRef="Gateway_04x62t8" targetRef="wait_for_order" />
    <bpmn:sequenceFlow id="Flow_15ub6z1" sourceRef="Gateway_04x62t8" targetRef="Event_1ag1j7v" />
    <bpmn:sequenceFlow id="Flow_10uz233" sourceRef="Event_1ag1j7v" targetRef="Event_0p2qupv" />
    <bpmn:sequenceFlow id="Flow_1akgpi6" sourceRef="wait_for_order" targetRef="Gateway_1isulns" />
    <bpmn:sequenceFlow id="Flow_1t04ep0" name="Yes" sourceRef="Gateway_1tjhlpf" targetRef="book_tickets">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=selected_option != null and billing_is_verified</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0lolztr" sourceRef="book_tickets" targetRef="send_ticket_bundle" />
    <bpmn:sequenceFlow id="Flow_0z6uur8" sourceRef="send_ticket_bundle" targetRef="broker_completed" />
    <bpmn:sequenceFlow id="Flow_0qpg2sy" sourceRef="Gateway_1isulns" targetRef="select_user_trip" />
    <bpmn:sequenceFlow id="Flow_14oahn9" sourceRef="Gateway_1isulns" targetRef="verify_payment_info" />
    <bpmn:sequenceFlow id="Flow_0hir55b" sourceRef="verify_payment_info" targetRef="Gateway_0qrfcfy" />
    <bpmn:sequenceFlow id="Flow_1w431pr" sourceRef="Gateway_19t74gf" targetRef="Gateway_1tjhlpf" />
    <bpmn:sequenceFlow id="Flow_1xlfyul" sourceRef="Gateway_1qs0i4z" targetRef="send_order_declined" />
    <bpmn:sequenceFlow id="Flow_1ql0nl8" sourceRef="send_order_declined" targetRef="Event_0p4x8j9" />
    <bpmn:sequenceFlow id="Flow_02mjgjt" name="No" sourceRef="Gateway_1tjhlpf" targetRef="Gateway_1qs0i4z" />
    <bpmn:sequenceFlow id="Flow_0j8ttmj" sourceRef="ticket_unavailable_error" targetRef="Gateway_1qs0i4z" />
    <bpmn:intermediateCatchEvent id="wait_for_order" name="Wait for order">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=billing_information" target="billing_information" />
          <zeebe:output source="=option_selected_id" target="option_selected_id" />
          <zeebe:output source="=order_id" target="order_id" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1p3bbyz</bpmn:incoming>
      <bpmn:outgoing>Flow_1akgpi6</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1ucsnr4" messageRef="Message_0m8h3ts" />
    </bpmn:intermediateCatchEvent>
    <bpmn:endEvent id="Event_0p4x8j9" name="Booking unsuccessful">
      <bpmn:incoming>Flow_1ql0nl8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sendTask id="send_order_declined" name="Send order declined">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="send_message_forward_data" />
        <zeebe:ioMapping>
          <zeebe:input source="=order_id" target="correlation_key" />
          <zeebe:input source="={&#10;  order_id: order_id,&#10;  billing_is_verified: billing_is_verified,&#10;  selected_option: selected_option,&#10;  option_selected_id: option_selected_id&#10;}" target="variables" />
          <zeebe:input source="=&#34;receive_order_failed&#34;" target="name" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1xlfyul</bpmn:incoming>
      <bpmn:outgoing>Flow_1ql0nl8</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:parallelGateway id="Gateway_19t74gf">
      <bpmn:incoming>Flow_0bi3ixu</bpmn:incoming>
      <bpmn:incoming>Flow_1wa716f</bpmn:incoming>
      <bpmn:outgoing>Flow_1w431pr</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:sequenceFlow id="Flow_1t1pgmj" sourceRef="Event_0w4fixi" targetRef="Gateway_0qrfcfy" />
    <bpmn:sequenceFlow id="Flow_0bi3ixu" sourceRef="Gateway_07ja635" targetRef="Gateway_19t74gf" />
    <bpmn:serviceTask id="verify_payment_info" name="Verify payment info">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="verify_payment_info" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="=billing_information" target="billing_information" />
          <zeebe:output source="=billing_is_verified" target="billing_is_verified" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_14oahn9</bpmn:incoming>
      <bpmn:outgoing>Flow_0hir55b</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_0w4fixi" attachedToRef="verify_payment_info">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=False" target="billing_is_verified" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1t1pgmj</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_00j1x5u" errorRef="Error_1i2a0n4" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1wa716f" sourceRef="Gateway_0qrfcfy" targetRef="Gateway_19t74gf" />
    <bpmn:exclusiveGateway id="Gateway_0qrfcfy">
      <bpmn:incoming>Flow_1t1pgmj</bpmn:incoming>
      <bpmn:incoming>Flow_0hir55b</bpmn:incoming>
      <bpmn:outgoing>Flow_1wa716f</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="select_user_trip" name="Select user trip">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="select_option_from_key" />
        <zeebe:ioMapping>
          <zeebe:input source="=route_options" target="options" />
          <zeebe:input source="=option_selected_id" target="key" />
          <zeebe:output source="=selected_option" target="selected_option" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0qpg2sy</bpmn:incoming>
      <bpmn:outgoing>Flow_18udxah</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_07ja635">
      <bpmn:incoming>Flow_020a814</bpmn:incoming>
      <bpmn:incoming>Flow_18udxah</bpmn:incoming>
      <bpmn:outgoing>Flow_0bi3ixu</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:boundaryEvent id="Event_1dkitk2" attachedToRef="select_user_trip">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="=null" target="selected_option" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_020a814</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1564umm" errorRef="Error_0zgfcwm" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_18udxah" sourceRef="select_user_trip" targetRef="Gateway_07ja635" />
    <bpmn:sequenceFlow id="Flow_020a814" sourceRef="Event_1dkitk2" targetRef="Gateway_07ja635" />
  </bpmn:process>
  <bpmn:message id="Message_3a03da5" name="find_journey">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=correlationKey" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_3l60vad" name="receive_journey_options">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1eej5mp" name="no_route_between_points" errorCode="no_route_between_points" />
  <bpmn:message id="Message_1t53vul" name="place_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_2g38bij" name="confirm_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_03l2nfh" name="receive_ticket_bundle">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=interaction_id&#10;" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:message id="Message_0kdc66h" name="receive_order_failed">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1ok0cm1" name="payment failed" errorCode="payment_failed" />
  <bpmn:error id="Error_1qywdd2" name="ticket unavailable" errorCode="ticket_unavailable" />
  <bpmn:message id="Message_00of2ts" name="booking_start" />
  <bpmn:category id="Category_00q6h2f">
    <bpmn:categoryValue id="CategoryValue_0p53zgh" value="finding the journey" />
  </bpmn:category>
  <bpmn:category id="Category_0crwelg">
    <bpmn:categoryValue id="CategoryValue_1hkieqt" value="booking the journey" />
  </bpmn:category>
  <bpmn:message id="Message_0m8h3ts" name="wait_for_order">
    <bpmn:extensionElements>
      <zeebe:subscription correlationKey="=order_id" />
    </bpmn:extensionElements>
  </bpmn:message>
  <bpmn:error id="Error_1i2a0n4" name="verification_failed" errorCode="verification_failed" />
  <bpmn:error id="Error_0zgfcwm" name="selection_option_from_key_error" errorCode="selection_option_from_key_error" />
  <bpmn:error id="Error_1avhy4h" name="booking_failed" errorCode="booking_failed" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="booking_flow">
      <bpmndi:BPMNShape id="Participant_03utb43_di" bpmnElement="Participant_03utb43" isHorizontal="true">
        <dc:Bounds x="160" y="130" width="2080" height="300" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0i4s5nq_di" bpmnElement="satisfied_with_option" isMarkerVisible="true">
        <dc:Bounds x="965" y="265" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="962" y="322" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ok5oum_di" bpmnElement="receive_journey_options">
        <dc:Bounds x="722" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="702" y="235" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0y4wae2_di" bpmnElement="fill_in_journey_form">
        <dc:Bounds x="410" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1f5ukgs_di" bpmnElement="Gateway_1f5ukgs" isMarkerVisible="true">
        <dc:Bounds x="325" y="265" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1fre0lb_di" bpmnElement="send_specifications_to_ticket_broker">
        <dc:Bounds x="572" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="550" y="222" width="79" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1g6z4p3_di" bpmnElement="Activity_0koua8h">
        <dc:Bounds x="810" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0y9km7f_di" bpmnElement="booking_start">
        <dc:Bounds x="252" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="238" y="248" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1bftc84_di" bpmnElement="place_order">
        <dc:Bounds x="1070" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1k9gx4n_di" bpmnElement="receive_ticket_bundle">
        <dc:Bounds x="1970" y="250" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0pu4pn8_di" bpmnElement="receive_order_confirmation">
        <dc:Bounds x="1822" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1805" y="236" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_12clyih_di" bpmnElement="customer_completed">
        <dc:Bounds x="2152" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2145" y="315" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0jlfhkj_di" bpmnElement="Gateway_0iauwby">
        <dc:Bounds x="1325" y="265" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1q1q5ls_di" bpmnElement="send_order_placement">
        <dc:Bounds x="1232" y="272" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1226" y="242" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0yjwtoz_di" bpmnElement="receive_order_failed">
        <dc:Bounds x="1912" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1895" y="315" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1mckn5l_di" bpmnElement="Event_0rgkr6v">
        <dc:Bounds x="2152" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2138" y="395" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0khrnne_di" bpmnElement="Flow_0khrnne">
        <di:waypoint x="910" y="290" />
        <di:waypoint x="965" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z14f5o_di" bpmnElement="Flow_no_wanted_options">
        <di:waypoint x="990" y="265" />
        <di:waypoint x="990" y="190" />
        <di:waypoint x="350" y="190" />
        <di:waypoint x="350" y="265" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="644" y="172" width="53" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1e14jc9_di" bpmnElement="Flow_satisfied">
        <di:waypoint x="1015" y="290" />
        <di:waypoint x="1070" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0i3qulw_di" bpmnElement="Flow_0i3qulw">
        <di:waypoint x="608" y="290" />
        <di:waypoint x="722" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1376j8f_di" bpmnElement="Flow_1376j8f">
        <di:waypoint x="758" y="290" />
        <di:waypoint x="810" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1uvme0m_di" bpmnElement="Flow_1uvme0m">
        <di:waypoint x="375" y="290" />
        <di:waypoint x="410" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tu4n9v_di" bpmnElement="Flow_1tu4n9v">
        <di:waypoint x="510" y="290" />
        <di:waypoint x="572" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iazujz_di" bpmnElement="Flow_start_booking">
        <di:waypoint x="288" y="290" />
        <di:waypoint x="325" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0o1mlnq_di" bpmnElement="Flow_0o1mlnq">
        <di:waypoint x="1170" y="290" />
        <di:waypoint x="1232" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a71apv_di" bpmnElement="Flow_1a71apv">
        <di:waypoint x="1375" y="290" />
        <di:waypoint x="1822" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_156hbi9_di" bpmnElement="Flow_156hbi9">
        <di:waypoint x="1350" y="315" />
        <di:waypoint x="1350" y="370" />
        <di:waypoint x="1912" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fz6gyb_di" bpmnElement="Flow_0fz6gyb">
        <di:waypoint x="1268" y="290" />
        <di:waypoint x="1325" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t2y54l_di" bpmnElement="Flow_1t2y54l">
        <di:waypoint x="1858" y="290" />
        <di:waypoint x="1970" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0cavbhh_di" bpmnElement="Flow_0cavbhh">
        <di:waypoint x="2070" y="290" />
        <di:waypoint x="2152" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11pyg7e_di" bpmnElement="Flow_11pyg7e">
        <di:waypoint x="1948" y="370" />
        <di:waypoint x="2152" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0bnjzeh_di" bpmnElement="Participant_0bnjzeh" isHorizontal="true">
        <dc:Bounds x="160" y="430" width="2080" height="440" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17rviuy_di" bpmnElement="receive_journey_specification">
        <dc:Bounds x="572" y="592" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="550" y="635" width="80" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0qpi6rd_di" bpmnElement="find_route_options">
        <dc:Bounds x="680" y="570" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1fnzjzi_di" bpmnElement="Gateway_04x62t8">
        <dc:Bounds x="825" y="585" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ag1j7v_di" bpmnElement="Event_1ag1j7v">
        <dc:Bounds x="832" y="702" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="811" y="745" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0p2qupv_di" bpmnElement="Event_0p2qupv">
        <dc:Bounds x="952" y="702" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="927" y="745" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0j0p40o_di" bpmnElement="book_tickets">
        <dc:Bounds x="1790" y="570" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1wjcqxy_di" bpmnElement="send_ticket_bundle">
        <dc:Bounds x="1970" y="570" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1cvibe4_di" bpmnElement="broker_completed">
        <dc:Bounds x="2152" y="592" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2145" y="635" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_182zskw_di" bpmnElement="Gateway_1isulns">
        <dc:Bounds x="1295" y="585" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1qs0i4z_di" bpmnElement="Gateway_1qs0i4z" isMarkerVisible="true">
        <dc:Bounds x="1795" y="765" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1tjhlpf_di" bpmnElement="Gateway_1tjhlpf" isMarkerVisible="true">
        <dc:Bounds x="1675" y="585" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1659" y="540" width="86" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1ijv48a_di" bpmnElement="wait_for_order">
        <dc:Bounds x="1232" y="592" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1217" y="638" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1v1y1za_di" bpmnElement="Event_0p4x8j9">
        <dc:Bounds x="2152" y="772" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2139" y="815" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ke26ub_di" bpmnElement="send_order_declined">
        <dc:Bounds x="1880" y="750" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1j7s9ku_di" bpmnElement="Gateway_19t74gf">
        <dc:Bounds x="1595" y="585" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1er9m4m_di" bpmnElement="verify_payment_info">
        <dc:Bounds x="1350" y="630" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0qrfcfy_di" bpmnElement="Gateway_0qrfcfy" isMarkerVisible="true">
        <dc:Bounds x="1505" y="717" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1lr06k9_di" bpmnElement="select_user_trip">
        <dc:Bounds x="1350" y="500" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_07ja635_di" bpmnElement="Gateway_07ja635" isMarkerVisible="true">
        <dc:Bounds x="1505" y="585" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0o52i6a_di" bpmnElement="ticket_unavailable_error">
        <dc:Bounds x="1802" y="632" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1826" y="675" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_17j74fl_di" bpmnElement="Event_0w4fixi">
        <dc:Bounds x="1362" y="692" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_148rnkd_di" bpmnElement="Event_1dkitk2">
        <dc:Bounds x="1362" y="562" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18x503c_di" bpmnElement="Flow_18x503c">
        <di:waypoint x="608" y="610" />
        <di:waypoint x="680" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0m1qd5a_di" bpmnElement="Flow_0m1qd5a">
        <di:waypoint x="780" y="610" />
        <di:waypoint x="825" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1p3bbyz_di" bpmnElement="Flow_1p3bbyz">
        <di:waypoint x="875" y="610" />
        <di:waypoint x="1232" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15ub6z1_di" bpmnElement="Flow_15ub6z1">
        <di:waypoint x="850" y="635" />
        <di:waypoint x="850" y="702" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10uz233_di" bpmnElement="Flow_10uz233">
        <di:waypoint x="868" y="720" />
        <di:waypoint x="952" y="720" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1akgpi6_di" bpmnElement="Flow_1akgpi6">
        <di:waypoint x="1268" y="610" />
        <di:waypoint x="1295" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t04ep0_di" bpmnElement="Flow_1t04ep0">
        <di:waypoint x="1725" y="610" />
        <di:waypoint x="1790" y="610" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1748" y="592" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lolztr_di" bpmnElement="Flow_0lolztr">
        <di:waypoint x="1890" y="610" />
        <di:waypoint x="1970" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0z6uur8_di" bpmnElement="Flow_0z6uur8">
        <di:waypoint x="2070" y="610" />
        <di:waypoint x="2152" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qpg2sy_di" bpmnElement="Flow_0qpg2sy">
        <di:waypoint x="1320" y="585" />
        <di:waypoint x="1320" y="540" />
        <di:waypoint x="1350" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14oahn9_di" bpmnElement="Flow_14oahn9">
        <di:waypoint x="1320" y="635" />
        <di:waypoint x="1320" y="670" />
        <di:waypoint x="1350" y="670" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hir55b_di" bpmnElement="Flow_0hir55b">
        <di:waypoint x="1450" y="670" />
        <di:waypoint x="1530" y="670" />
        <di:waypoint x="1530" y="717" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w431pr_di" bpmnElement="Flow_1w431pr">
        <di:waypoint x="1645" y="610" />
        <di:waypoint x="1675" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xlfyul_di" bpmnElement="Flow_1xlfyul">
        <di:waypoint x="1845" y="790" />
        <di:waypoint x="1880" y="790" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ql0nl8_di" bpmnElement="Flow_1ql0nl8">
        <di:waypoint x="1980" y="790" />
        <di:waypoint x="2152" y="790" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02mjgjt_di" bpmnElement="Flow_02mjgjt">
        <di:waypoint x="1700" y="635" />
        <di:waypoint x="1700" y="790" />
        <di:waypoint x="1795" y="790" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1708" y="653" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0j8ttmj_di" bpmnElement="Flow_0j8ttmj">
        <di:waypoint x="1820" y="668" />
        <di:waypoint x="1820" y="765" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t1pgmj_di" bpmnElement="Flow_1t1pgmj">
        <di:waypoint x="1380" y="728" />
        <di:waypoint x="1380" y="742" />
        <di:waypoint x="1505" y="742" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0bi3ixu_di" bpmnElement="Flow_0bi3ixu">
        <di:waypoint x="1555" y="610" />
        <di:waypoint x="1595" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wa716f_di" bpmnElement="Flow_1wa716f">
        <di:waypoint x="1555" y="742" />
        <di:waypoint x="1620" y="742" />
        <di:waypoint x="1620" y="635" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18udxah_di" bpmnElement="Flow_18udxah">
        <di:waypoint x="1450" y="540" />
        <di:waypoint x="1530" y="540" />
        <di:waypoint x="1530" y="585" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_020a814_di" bpmnElement="Flow_020a814">
        <di:waypoint x="1380" y="598" />
        <di:waypoint x="1380" y="610" />
        <di:waypoint x="1505" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Group_0xcsi01_di" bpmnElement="Group_0xcsi01">
        <dc:Bounds x="220" y="80" width="820" height="820" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="605" y="87" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Group_0dgr1tw_di" bpmnElement="Group_0dgr1tw">
        <dc:Bounds x="1050" y="80" width="1170" height="820" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1607" y="87" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1kxf5u4_di" bpmnElement="Flow_1kxf5u4">
        <di:waypoint x="740" y="570" />
        <di:waypoint x="740" y="308" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17w097p_di" bpmnElement="Flow_17w097p">
        <di:waypoint x="1250" y="308" />
        <di:waypoint x="1250" y="592" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gtwswc_di" bpmnElement="Flow_1gtwswc">
        <di:waypoint x="1840" y="570" />
        <di:waypoint x="1840" y="308" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07acwrm_di" bpmnElement="Flow_07acwrm">
        <di:waypoint x="2020" y="570" />
        <di:waypoint x="2020" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1sfvhv9_di" bpmnElement="Flow_1sfvhv9">
        <di:waypoint x="1930" y="750" />
        <di:waypoint x="1930" y="388" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sjwsjb_di" bpmnElement="Flow_0sjwsjb">
        <di:waypoint x="590" y="308" />
        <di:waypoint x="590" y="592" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
